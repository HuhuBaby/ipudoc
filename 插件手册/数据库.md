## 概要

> 数据库操作主要分为2大类：SQL执行(execSQL)和增删改查操作(insert, update, delete, select, selectFirst)。 
> 其中前者适用于复杂操作；后者适用于单表操作。

# 1.execSQL

**功能**

执行指定SQL语句。执行查询语句时，返回查询结果集；执行非查询SQL时，返回执行结果。



**定义**

WadeMobile.execSQL(dbName, createSql, bindArgs, limit, offset, callback, err);



**参数**

| 参数名   | 参数类型 | 参数描述                       | 参数备注 |
| -------- | -------- | --------------------------- | -------- |
| dbName   | string   | 数据库名称                    | 必传     |
| execSQL  | string   | 执行SQL语句                  | 必传     |
| bindArgs | string   | 绑定参数（预占符为“:V+字段名”或者“?”）  | 选传     |
| limit    | string   | 每页查询条数（查询语句时，与offset同为数字） | 选传   |
| offset   | string   | 跳过条数（查询语句时，与limit同为数字）     | 选传   |
| callback | function | 执行成功后回调函数                       | 选传   |
| err      | function | 执行失败后的回调函数                     | 选传    |



**范例**

```
1.非查询语句，无参数
var createSql = "DELETE FROM student";
Mobile.execSQL(dbName, createSql, null, null, null, function(result){
    alert(result);
});
2.非查询语句，带参数
var updateSql = "UPDATE student SET stu_name = :VSTU_NAME, stu_age = :VSTU_AGE WHERE stu_no = :VSTU_NO";
var params = new Wade.DataMap();
params.put("STU_NAME", "DAVE");
params.put("STU_AGE",  19);
params.put("STU_NO", "2015001");
Mobile.execSQL(dbName, updateSql, params, null, null, function(result){
    alert(result);
});
3.查询类语句，带参数，查询第10-25条数据；
var sql = "SELECT stu_no,stu_name,stu_age,stu_sex FROM student WHERE stu_name=:VSTU_NAME AND stu_age=:VSTU_AGE AND stu_sex=:VSTU_SEX";
var params = new Wade.DataMap();//查询字段
params.put("STU_NAME", "JACK");
params.put("STU_AGE", "19");
params.put("STU_SEX", "M");
WadeMobile.execSQL(dbName, sql, params, 15, 10, function(result){
    alert(result);
});
```



**备注**

对于bindArgs，参数的占位符格式有两种；一种为“:V+字段名称”，另一种为“?”，不可同时使用； 

对于limit和offset，当两者同为合法数字时进行分页，否则不分页；在不分页时，建议两者均使用null作为参数；



# 2.insert

**功能**

数据库插入功能，适用于单表操作；



**定义**

Mobile.insert(dbName, tableName, params, callback, err);



**参数**

| 参数名    | 参数类型 | 参数描述             | 参数备注 |
| --------- | -------- | -------------------- | -------- |
| dbName    | string   | 数据库名称           | 必传     |
| tableName | string   | 表名称               | 必传     |
| params    | map      | 插入字段信息         | 必传     |
| callback  | function | 执行成功后回调函数   | 选传     |
| err       | function | 执行失败后的回调函数 | 选传     |



**范例**

```
var param = new Wade.DataMap();
params.put("STU_NO", "2015001");
params.put("STU_NAME", "JACK");
params.put("STU_AGE", "19");
params.put("STU_SEX", "M");
Mobile.insert(dbName, tableName, params, function(result){
    alert(result);
});
```



**备注**

无



# 3.update

**功能**

数据库更新功能，适用于单表操作；



**定义**

Mobile.update(dbName, tableName, params, condSQL, conds, callback, err);



**参数**

| 参数名    | 参数类型 | 参数描述                          | 参数备注 |
| --------- | -------- | --------------------------------- | -------- |
| dbName    | string   | 数据库名称                        | 必传     |
| tableName | string   | 表名称                            | 必传     |
| params    | map      | 更新字段信息                      | 必传     |
| condSQL   | string   | 条件语句（与conds同存同无）       | 选传     |
| conds     | map      | 绑定条件参数（与condSQL同存同无） | 选传     |
| callback  | function | 执行成功后回调函数                | 选传     |
| err       | function | 执行失败后的回调函数              | 选传     |



**范例**

```
var param = new Wade.DataMap();
param.put("STU_NAME", "Dave");
var condSQL = "STU_NO = :VSTU_NO";
var conds = new Wade.DataMap();
conds.put("STU_NO", "2015001");
Mobile.update(dbName, tableName, param, condSQL, conds, function(result){
    alert(result);
});
```



**备注**

当condSQL为null时，全表更新，此类操作请慎重处理。



# 4.delete

**功能**

数据库删除功能，适用于单表操作；



**定义**

Mobile.delete(dbName, tableName, condSQL, conds, callback, err);



**参数**

| 参数名    | 参数类型 | 参数描述                          | 参数备注 |
| --------- | -------- | --------------------------------- | -------- |
| dbName    | string   | 数据库名称                        | 必传     |
| tableName | string   | 表名称                            | 必传     |
| condSQL   | string   | 条件语句（与conds同存同无）       | 选传     |
| conds     | map      | 绑定条件参数（与condSQL同存同无） | 选传     |
| callback  | function | 执行成功后回调函数                | 选传     |
| err       | function | 执行失败后的回调函数              | 选传     |



**范例**

```
var condSQL = "STU_NO = :VSTU_NO";
var param = new Wade.DataMap();
param.put("STU_NO", "2015001");
Mobile.delete(dbName, tableName, condSQL, param, function(result){
    alert(result);
});
```



**备注**

当condSQL为null时，全表删除，此类操作请慎重处理。



# 5.select

**功能**

数据库查询功能，适用于单表操作；



**定义**

WadeMobile.select(dbName, tableName, columns, condSQL, conds, limit, offset, callback, err);



**参数**

| 参数名    | 参数类型 | 参数描述                           | 参数备注 |
| --------- | -------- | ---------------------------------- | -------- |
| dbName    | string   | 数据库名称                         | 必传     |
| tableName | string   | 表名称                             | 必传     |
| columns   | array    | 查询字段（为null时，查询全表字段） | 选传     |
| condSQL   | string   | 条件语句（与conds同存同无）        | 选传     |
| conds     | map      | 绑定条件参数（与condSQL同存同无）  | 选传     |
| limit     | string   | 每页查询条数（与offset同为数字）   | 选传     |
| offset    | string   | 跳过条数（与limit同为数字）        | 选传     |
| callback  | function | 执行成功后回调函数                 | 选传     |
| err       | function | 执行失败后的回调函数               | 选传     |



**范例**

```
var columns = ["stu_name","stu_age","stu_sex"];
var condSQL = "STU_AGE = :VSTU_AGE";
var conds = new Wade.DataMap(); 
conds.put("STU_AGE", "19"); 
WadeMobile.select(dbName, tableName, columns, condSQL, conds, null, null, function(obj){
    alert(obj);
});
```



**备注**

对于limit和offset，当两者同为合法数字时进行分页，否则不分页；在不分页时，建议两者均使用null作为参数；



# 6.selectFirst

**功能**

数据库查询功能（只查询一条），适用于单表操作；



**定义**

WadeMobile.selectFirst(dbName, tableName, columns, condSQL, conds, callback, err);



**参数**

| 参数名    | 参数类型 | 参数描述                           | 参数备注 |
| --------- | -------- | ---------------------------------- | -------- |
| dbName    | string   | 数据库名称                         | 必传     |
| tableName | string   | 表名称                             | 必传     |
| columns   | array    | 查询字段（为null时，查询全表字段） | 选传     |
| condSQL   | string   | 条件语句（与conds同存同无）        | 选传     |
| conds     | map      | 绑定条件参数（与condSQL同存同无）  | 选传     |
| callback  | function | 执行成功后回调函数                 | 选传     |
| err       | function | 执行失败后的回调函数               | 选传     |



**范例**

略



**备注**

略