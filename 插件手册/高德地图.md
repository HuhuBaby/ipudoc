# 1.location

**功能**

获取当前位置(定位)。



**定义**

WadeMobile.location(callback,err);



**参数**

| 参数名   | 参数类型 | 参数描述 | 参数备注 |
| -------- | -------- | -------- | -------- |
| callback | function | 回调函数 | 必填     |
| err      | function | 错误信息 | 可选     |



**范例**

```
$("#location").tap(function(){
    WadeMobile.loadingStart("正在定位");
    WadeMobile.location(function(info){
        WadeMobile.loadingStop();
        var data=new Wade.DataMap(info);
        $("#locationDesc").html(data.get("LocationDesc"));
        iscroll.refresh();
        alert(data);
    },function(error){
        WadeMobile.loadingStop();
        WadeMobile.tip(error);
    });
})
```



**备注**

示例中的info:字符串类型，返回位置信息。



# 2.selectLocation

**功能**

在地图上选择一个位置，并返回位置信息。



**定义**

WadeMobile.selectLocation(callback,isLocation,longitude,latitude,scale);



**参数**

| 参数名     | 参数类型 | 参数描述              | 参数备注                |
| -------- | -------- | -------------------- | --------------------- |
| callback   | function | 回调函数            | 必填                   |
| isLocation | boolean  | 是否自动定位       | 可选，缺省时不自动定位，false |
| longitude  | int      | 打开地图时，默认的中心位置的经度 | 可选，缺省时为-1 |
| latitude   | int      | 打开地图时，默认的中心位置的纬度 | 可选，缺省时为-1 |
| scale      | int      | 打开地图时，默认的比例尺         | 可选，缺省时为-1 |



**范例**

```
$("#selectLocation").tap(function(){
    WadeMobile.selectLocation(function(str){
        var data=new Wade.DataMap(str);
        var lat=parseFloat(data.get("Latitude"));
        var lng=parseFloat(data.get("Longitude"));
        var latlng="选定坐标："+lng.toFixed(2)+" , "+lat.toFixed(2);
        var desc=data.get("LocationDesc");
        $("#selectLatLng").html(latlng);
        $("#selectLocationDesc").html("选定地址："+desc);
        iscroll.refresh();
        alert(str);
    });
});
```



**备注**

示例中的str: 字符串类型，返回选择的位置信息。



# 3.markMap

**功能**

在地图上标记出一系列坐标，同时可以设置是否允许用户选择一个坐标，并返回选择的位置。



**定义**

WadeMobile.markMap(callback,markParam,isSelect,isJump,isEscape,err);



**参数**

| 参数名    | 参数类型    | 参数描述                     | 参数备注        |
| -------- | --------- | --------------------------- | -------------- |
| callback  | function | 回调函数                       | 必填          |
| markParam | DataMap / DatasetList | 被标记位置的相关信息      | 必填    |
| isSelect  | boolean   | 是否允许用户选择一个坐标后返回 | 可选，缺省为false |
| isJump    | boolean   | 用户单击标记时，图标是否跳动   | 可选，缺省为false |
| isEscape  | boolean   | 是否对数据进行编码，以避免乱码 | 可选，缺省为false |
| err       | function  | 错误信息                   | 可选，错误信息    |



**范例**

```
$("#markMapMulti").tap(function(){
    var list=new Wade.DatasetList();
    /*不设置Icon则使用默认图标*/
    /*不设置Title和Snippet则使用默认位置信息*/
    //标记长沙
    var data1=new Wade.DataMap();
    data1.put("Latitude",28.20);
    data1.put("Longitude", 112.96);
    list.add(data1);
    //标记衡阳
    var data2=new Wade.DataMap();
    data2.put("Latitude",26.91);
    data2.put("Longitude", 112.57);
    data2.put("Icon", "map_mark");
    data2.put('Title',"工业城市衡阳");
    //标记内容过长情况
    data2.put("Snippet", "地处南岳衡山之南，因山南水北为“阳”，故得此名；又因“北雁南飞，至此歇翅停回”栖息于市区回雁峰，而雅称“雁城”。");
    list.add(data2);
    //标记岳阳
    var data3=new Wade.DataMap();
    data3.put("Latitude", 29.39);
    data3.put("Longitude", 113.13);
    data3.put("Icon", "map_mark");
    //标记内容过长情况
    data3.put("Title", "岳阳古称巴陵、又名岳州。东倚幕阜山，西临洞庭湖，北接长江，远眺湖北，南连湘、资、沅、澧四水。");
    //没有输入标记内容,内容会默认是一个地址
    list.add(data3);
    WadeMobile.markMap(function(info){
        var data = new Wade.DataMap(info);
        alert(data);
    },list,true,false,true);
});
$("#markMapSingle").tap(function(){
    var param=new Wade.DataMap();
    param.put("Latitude",28.1953);
    param.put("Longitude",112.9886);
    param.put('Title',"我们是谁?");
    param.put("Snippet", "我们是Wade平台系统架构部，在长沙五一大道银华大酒店办公，如有需要可以联系我们。");
    WadeMobile.markMap(function(info){
        var data = new Wade.DataMap(info);
        alert(data);
    },param,false,true,true);
});
```



**备注**

示例中的info: 返回选择的位置信息。



# 备注

>高德地图插件集成了高德地图SDK。
>
>使用此插件需前往高德地图开放平台申请KEY，提供应用唯一标识（包名），SHA1。
>
>按高德地图开放平台要求配置KEY。