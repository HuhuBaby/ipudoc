# 1.openPage

**功能**

打开指定的页面(调用数据接口)



**定义**

Common.openPage(pageAction, [param]);



**参数**

| 参数名     | 参数类型   | 参数描述   | 参数备注  |
| ---------- | ---------- | ----------- | ---------- |
| pageAction | string  | 解析模板页面对应的pageAction  | 必传，对应配置文件server-page.xml中的action.name |
| param | Wade.DataMap | 解析模板页面时调用数据接口所需的参数 | 可选，缺省时表示数据接口无需参数  |

**范例**

```
var param = new Wade.DataMap();
param.put("USER_NAME","张三");
Common.openPage("Index",param);
```



**备注**

Common对象是common.js中定义的，属于业务级的js对象，为什么会写进文档？ 
openPage方法作为插件方法实际上是挂载在WadeMobile对象上的。为了兼容移动客户端和浏览器，所以衍生出Mobile对象。但这个方法通常会有公共的业务逻辑，所以进一步衍生出Common对象。而我们希望使用者将存在公共业务逻辑的方法提取到Common中，所以写进文档提醒使用者。




# 2.openTemplate

**功能**

打开指定的模板页面(不调用数据接口)



**定义**

openTemplate(pageAction, [param]);



**参数**

| 参数名     | 参数类型     | 参数描述  | 参数备注  |
| ---------- | ----------- | ---------- | ------------ |
| pageAction | string       | 解析模板页面对应的pageAction | 必传，对应配置文件server-page.xml中的action.name |
| param      | Wade.DataMap | 解析模板页面需要的渲染数据   | 可选。缺省时模板页面无需渲染数据   |

**范例**

```
var param=new Wade.DataMap();
param.put("USER_NAME","张三");
Mobile.openTemplate("Index",param);
```



**备注**

无




# 3.back

**功能**

回退上一级视图



**定义**

back([tag]);



**参数**

| 参数名 | 参数类型 | 参数描述  | 参数备注 |
| ------ | -------- | --------- | -------- |
| tag    | string   | 回退到指定界面，tag对应配置文件server-page.xml中的action.name | 选填   |



**范例**

```
Mobile.back();//回退到上一级界面
Mobile.back("Index");//回退到指定的界面，首页
```



**备注**

对应浏览器中的history.go(-1)语法，但是移动端上的实现是完全不一样的，因为移动端上是多视图的，而浏览器严格来说是单视图的。并且back中的参数tag可以实现回退到指定的界面。



# 4.backWithCallback

**功能**

回退视图层级，并触发事件

**定义**

backWithCallback(result, [pageName])

**参数**

| 参数名   | 参数类型 | 参数描述 | 参数备注 |
| -------- | -------- | ------------ | -------- |
| result | string | 返回值 | 必填     |
| pageName | string   | 回退到指定界面，tag对应配置文件server-page.xml中的action.name | 选填     |

**范例**

```javascript
//回退到指定的界面，首页，并触发事件，返回的值被 setBackCallListener  插件的回调接收
Mobile.backWithCallback("回调：测试数据来自pageB", "PageHandler");
```

**备注**

无



# 5.setBackCallListener

**功能**

设置监听回调

**参数**

| 参数名称 | 参数类型 | 参数描述 | 参数备注                                 |
| -------- | -------- | -------- | ---------------------------------------- |
| callback | function | 回调函数 | 必传，接收`backWithCallback`设置的返回值 |

**范例**

```javascript
WadeMobile.setBackCallListener(function(e){
		alert(e);
});
```

**备注**

无



# 6.openUrl

**功能**
打开指定url的网址

**参数**

| 参数名                                                       | 参数类型 | 参数描述                                                     | 参数备注 |
| ------------------------------------------------------------ | -------- | ------------------------------------------------------------ | -------- |
| url                                                          | String   | 指定的url，如："http://www.baidu.com/"                       | 必填     |
| callback                                                     | function | 回调函数                                                     | 可选     |
| title                                                        | string   | 标题                                                         | 可选     |
| [isShare,isSearch,isCoppLink]                                | 数组     | 可选按钮：isShare,isSearch,isCoppLink；分享、 搜索、复制链接 | 可选     |
| [topbarbgcolor,iconcolor,textcolor]                          | 数组     | 顶部背景色、图标颜色、字体颜色                               | 可选     |
| hideTopBar                                                   | boolean  | 默认显示顶部导航栏，hideTopBar为true时可隐藏顶部导航栏       | 可选     |
| [isbtnBackHide,isbtnCloseHide,isbtnRefreshHide,isbtnMoreHide] | 数组     | 控制顶部栏返回、关闭刷新和更多btnRefresh4个按钮的隐藏和显示，默认显示  | 可选     |
| isShowFloatButton                                            | boolean  | hideTopBar为true时悬浮按钮默认显示，当hideTopBar为false时悬浮按钮默认隐藏； 若传值，true：显示；false：隐藏 | 可选     |

**范例**

```
Mobile.openUrl(url);
```
**备注**

作为Android来说存在一个物理返回键，但是对于iOS来说没有返回的方式。所以，我们开发了一个悬浮的按钮来执行返回事件。没有在界面顶部开发一个原生的导航栏是为了不破坏原有的页面结构。仅新版本支持isShowFloatButton参数配置，旧版不支持



# 7.closeUrl

**功能**
配合openURL使用，关闭打开了的网址

**参数**

| 参数名 | 参数类型 | 参数描述                  | 参数备注 |
| ------ | -------- | ------------------------- | -------- |
| result | String   | 传值给openUrl的回调返回值 | 可选     |

**范例**

```
Mobile.closeUrl();
```
**备注**

仅新版本支持，旧版不支持



# 8.loadPage

**功能**

当前视图打开指定的页面(调用数据接口)



**定义**

Mobile.loadPage(pageAction, [param]);



**参数**

| 参数名     | 参数类型     | 参数描述  | 参数备注 |
| ---------- | ------------ | ------------- | ------------ |
| pageAction | string   | 解析模板页面对应的pageAction  | 必传，对应配置文件server-page.xml中的action.name |
| param | Wade.DataMap | 解析模板页面时调用数据接口所需的参数 | 可选，缺省时表示数据接口无需参数  |



**范例**

```
var param = new Wade.DataMap();
param.put("USER_NAME","张三");
Mobile.loadPage("Index",param);
```



**备注**

这个API在浏览器模式下和openPage没有区别。



# 9.loadTemplate

**功能**

当前视图打开指定的模板页面(不调用数据接口)



**定义**

loadTemplate(pageAction, [param]);



**参数**

| 参数名     | 参数类型     | 参数描述 | 参数备注  |
| ---------- | ------------ | -------- | ----------- |
| pageAction | string       | 解析模板页面对应的pageAction | 必传，对应配置文件server-page.xml中的action.name |
| param  | Wade.DataMap | 解析模板页面需要的渲染数据   | 可选。缺省时模板页面无需渲染数据  |



**范例

```
var param=new Wade.DataMap();
param.put("USER_NAME","张三");
Mobile.loadTemplate("Index",param);
```



**备注**

这个API在浏览器模式下和openTemplate没有区别。



# 10.loadUrl

**功能**

当前视图打开指定url的网址



**定义**

loadUrl(url);



**参数**

| 参数名 | 参数类型 | 参数描述   | 参数备注 |
| ------ | -------- | -------- | -------- |
| url    | string   | 指定的url，如："http://www.baidu.com/" | 必填     |



**范例**

```
Mobile.loadUrl("<a href="http://www.baidu.com/&quot;);" style="line-height: 1.6;"><span data-wiz-span="data-wiz-span" style="font-size: 0.875rem;">http://www.baidu.com/");</span></a>
```



**备注**

这个API在浏览器模式下和openUrl没有区别。



# 11.getPage

**功能**

根据模板获取解析后的html字符串(调用数据接口)



**定义**

Mobile.getPage(pageAction, param, callback);



**参数**

| 参数名     | 参数类型     | 参数描述  | 参数备注   |
| ---------- | ------------ | ----------- | --------------- |
| pageAction | string       | 解析模板页面对应的pageAction | 必传，对应配置文件server-page.xml中的action.name |
| param      | Wade.DataMap | 解析模板页面需要的渲染数据   | 可选。缺省时模板页面无需渲染数据   |
| callback   | function     | 回调函数     | 必传   |



**范例**

```
Mobile.getPage("TestTemplate",param,function(htmlStr){
    alert("解析出来的页面源码为：" + htmlStr);
});
```



**备注**

通常用于局部刷新功能



# 12.getTemplate

**功能**

根据模板获取解析后的html字符串(不调用数据接口)



**定义**

Mobile.getTemplate(pageAction, param, callback);



**参数**

| 参数名     | 参数类型     | 参数描述 | 参数备注   |
| ---------- | ------------ | ------- | ------------ |
| pageAction | string       | 解析模板页面对应的pageAction | 必传，对应配置文件server-page.xml中的action.name |
| param      | Wade.DataMap | 解析模板页面需要的渲染数据   | 可选。缺省时模板页面无需渲染数据    |
| callback   | function     | 回调函数   | 必传    |



**范例**

```
Mobile.getTemplate("TestTemplate",param,function(htmlStr){
    alert("解析出来的页面源码为：" + htmlStr);
});
```



**备注**

通常用于局部刷新功能



# 13.openWindow

**功能**

根据模板打开一个新窗口展示页面



**定义**

Common.openWindow(pageAction, param, callback);



**参数**

| 参数名     | 参数类型     | 参数描述     | 参数备注     |
| ---------- | ------------ | ------------ | ---------- |
| pageAction | string       | 解析模板页面对应的pageAction | 必传，对应配置文件server-page.xml中的action.name |
| param      | Wade.DataMap | 解析模板页面需要的渲染数据   | 可选。缺省时模板页面无需渲染数据     |
| callback   | function     | 回调函数      | 必传     |



**范例**

```
Common.openWindow("TestWindow",null,function(result){
    alert("关闭窗口时返回数据："+result);
});
```

**备注**

此方法的callback回调函数会在closeWindow中触发。



# 14.closeWindow

**功能**

关闭打开的窗口



**定义**

Common. closeWindow(result);



**参数**

| 参数名 | 参数类型 | 参数描述 | 参数备注   |
| ------ | -------- | -------- | ----------- |
| result | string   | 返回结果 | 可选，返回结果可以根据需求转换为Wade.Datamap类型或者Wade.DatasetList类型 |



**范例**

```
var data = new Wade.DataMap();
data.put("STATIC_DATA_ORDER",order);
data.put("STATIC_DATA_VALUE",value);
data.put("DESCRIPTION",description);
WadeMobile.hideKeyBoard();
Mobile.closeWindow(data.toString());
```



**备注**

返回结果如果是Wade.DataMap类型需要toString。



# 15.closeApp

**功能**

关闭应用



**定义**

Common.closeApp();



**参数**

无



**范例**
```
Common.closeApp();
```



## 备注

无
