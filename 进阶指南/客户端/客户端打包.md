# 客户端打包

[Android](#Android)

[iOS](#iOS)



<span id="Android">

> #Android

概要
---

本文档介绍使用Android Studio打包生成已签名的apk的方法。

###1. 修改服务端的请求地址

修改项目assets目录下的mobile-config.xml文件中的request_host配置（修改服务端的ip地址和端口）。
![](../../source/images/android_package/mobile-config.png)

###2. 生成已签名发行版或调试版apk
选择菜单Build→Generate Signed APK...并点击
<div>
<img src="../../source/images/android_package/build-menu.png"  height="210px" width="200px">
</div>

点击后，出现如下界面：
<div>
<img src="../../source/images/android_package/generate-signed-apk.png"  height="193px" width="400px">
</div>

如果还没有签名文件，需要使用新创建的签名文件，则点击Create new...按钮，点击后出现如下界面：
<div>
<img src="../../source/images/android_package/new-key.png"  height="263px" width="280px">
</div>

如果要使用已有的签名文件，那么点击Choose existing...按钮，选择已有的签名文件的路径，在Key store password输入框填写上密钥存储密码，在Key alias输入框填写上别名，在Key password输入框填写上该别名对应的密码，而后点击Next按钮，出现如下界面：
<div>
<img src="../../source/images/android_package/finish-apk.png"  height="190px" width="400px">
</div>

选择apk的保存路径和Build Type后，点击Finish按钮即可生成已签名发行版或调试版apk。



<span id="iOS">

> # iOS

## 概要

IpuClient基础工程中自带Aggregate脚本，如果使用IpuClient构建IPU的IOS版客户端应用则直接运行即可。如有其它问题，可通过IPU群或者IPU邮箱联系团队解决。

### 1.关于证书

99美元的个人版账号：必须发布在App Store中，App的每次更新发布都需要经过苹果公司的审核。**适合做创新应用，不适合做企业级应用。**
299美元的企业版账号：不必发布App Store，不需要审核，**适合做所有类型应用**。

> 使用苹果账号会创建一系列的证书文件：CSR、CER、P12和mobileprovision文件。如果使用IPU产品，IPU团队将有义务帮助刚刚接触IOS的项目团队了解证书使用和原理。

### 2. 选择注册的证书 

Targets - Build Settings - Code Signing - Code Signing Identity - Release 选中已注册的证书
![](../../source/images/ios_package/register_certificate.png)

### 3. 运行Aggregate

选择对应工程的Aggregate并运行，会在工程目录中的build下生成IPA文件。
![](../../source/images/ios_package/run_aggregate.jpg)

### 注意事项

- 字节码配置(中间码)
  Targets - Build Settings - Build Options - Enable Bitcode 设置为NO     
  ![](../../source/images/ios_package/bitcode.png)

> 注：bitcode配置在xcode7以后才存在。