# 客户端自动更新



> #Android

* 修改服务端server-config.xml中的clientVersion属性值为最新发布的客户端版本号，clientVersion的值对应客户端中主app工程中的build.gradle文件中的versioName属性的值。

  ![1572924767879](../../source/images/1572924767879.png)

  ![1572924712672](../../source/images/1572924712672.png)

  
* 在客户端的assets/mobile-config.xml中修改update_url属性的值为远程服务端最新apk路径
```
<!-- 非必须。更新应用的url -->
<config name="update_url" value="http://123.57.35.51/download/android/display-client.apk"/>
```



> ## iOS

1. 首先需要一个SSL证书，plist文件的访问需要https协议，证书的申请可以参考[这里](http://www.freehao123.com/startssl-ssl/)
2. plist文件的生成可以在Xcode生成ipa时选择包含plist文件。也可以参考该原始plist文件，样式如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>items</key>
	<array>
		<dict>
			<key>assets</key>
			<array>
				<dict>
					<key>kind</key>
					<string>software-package</string>
					<key>url</key>
					<string>THE URL FOR YOUR IPA: ex: http://go.com/appname.ipa</string>
				</dict>
				<dict>
					<key>kind</key>
					<string>full-size-image</string>
					<key>needs-shine</key>
					<true/>
					<key>url</key>
					<string>THE URL FOR INSTALLATION @2x ICON: ex: http://go.com/Icon@2x.png</string>
				</dict>
				<dict>
					<key>kind</key>
					<string>display-image</string>
					<key>needs-shine</key>
					<true/>
					<key>url</key>
					<string>THE URL FOR INSTALLATION ICON: ex: http://go.com/Icon.png</string>
				</dict>
			</array>
			<key>metadata</key>
			<dict>
				<key>bundle-identifier</key>
				<string>YOUR BUNDLE ID (Take it from your Xcode Project)</string>
				<key>bundle-version</key>
				<string>1.2.3 Your app version</string>
				<key>kind</key>
				<string>software</string>
				<key>title</key>
				<string>The Title To Present To The User installing the app</string>
			</dict>
		</dict>
	</array>
</dict>
</plist>
```

***注意***

- plist文件的名称必须跟ipa文件的名称一致；
- <bundle-identifier>必须和ipa的一致，可以在xcode中查看；
- 没有指定<full-size-image>和<display-image>的图片地址，可能会导致在ios8以上的设配上可以下载，但无法安装；

